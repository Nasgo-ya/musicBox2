<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Disco Randomizer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Geologica -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Geologica:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
@keyframes pulse {
    0% { box-shadow: 0 0 10px #00fff0; }
    50% { box-shadow: 0 0 30px #ff00ff; }
    100% { box-shadow: 0 0 10px #00fff0; }
}

body {
    margin: 0;
    min-height: 100vh;
    background: radial-gradient(circle at top, #1a002a, #000);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Geologica', system-ui, sans-serif;
    color: #fff;
}

.screen {
    width: 420px;
    max-width: 100%;
    padding: 30px 20px 40px;
    text-align: center;
    position: relative;
}

/* ---------- старт ---------- */
#startScreen h1 {
    color: #ff5cff;
    margin-bottom: 30px;
}

.mode-btn {
    width: 100%;
    max-width: 280px;
    margin: 12px auto;
    padding: 18px 0;
    border-radius: 50px;
    border: none;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    color: #000;
    background: linear-gradient(45deg, #ff00ff, #00fff0);
    animation: pulse 1.5s infinite;
}

/* ---------- игра ---------- */
#gameScreen { display: none; }

.top-controls {
    position: absolute;
    top: 10px;
    left: 10px;
    right: 10px;
    display: flex;
    justify-content: space-between;
}

.icon-btn {
    width: 34px;
    height: 34px;
    background: rgba(255,255,255,0.08);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
}

.icon-btn svg {
    width: 18px;
    height: 18px;
    stroke: #00fff0;
    stroke-width: 2;
    fill: none;
}

/* ---------- tooltip ---------- */
.icon-btn::after,
.copy-btn::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: -34px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.8);
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity .2s;
}

.icon-btn:hover::after,
.copy-btn:hover::after {
    opacity: 1;
}

h2 { color: #ff5cff; }

.counter {
    margin: 10px 0 20px;
    font-size: 16px;
    color: #aaa;
}

.counter span {
    color: #00fff0;
    font-weight: bold;
}

#result {
    font-size: 72px;
    margin: 20px 0 5px;
    color: #00fff0;
    text-shadow: 0 0 30px #00fff0;
}

/* ---------- слово + копирование ---------- */
.word-wrap {
    display: inline-flex;
    align-items: center;
    gap: 18px;
    min-height: 44px;
    margin-bottom: 20px;
}

#word {
    font-size: 22px;
    color: #ff5cff;
}

.copy-btn {
    display: none;
    cursor: pointer;
    position: relative;
}

.copy-btn svg {
    width: 22px;
    height: 22px;
    stroke: #00fff0;
    stroke-width: 2;
    fill: none;
}

/* ---------- кнопка ---------- */
button.main {
    width: 100%;
    max-width: 280px;
    margin: 30px auto 0;
    padding: 18px 0;
    border-radius: 50px;
    border: none;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    color: #000;
    background: linear-gradient(45deg, #ff00ff, #00fff0);
    animation: pulse 1.5s infinite;
}

/* ---------- история ---------- */
.history {
    margin-top: 20px;
    max-height: 78px;
    overflow-y: auto;
    border-top: 1px solid rgba(255,255,255,0.1);
    padding-top: 10px;
    scrollbar-width: thin;
    scrollbar-color: #00fff0 transparent;
}

.history::-webkit-scrollbar {
    width: 6px;
}
.history::-webkit-scrollbar-thumb {
    background: #00fff0;
    border-radius: 10px;
}

.history span {
    display: inline-block;
    margin: 4px;
    padding: 6px 10px;
    border-radius: 8px;
    background: rgba(0,255,240,0.15);
    color: #00fff0;
}
</style>
</head>

<body>

<div class="screen" id="startScreen">
    <h1>Выбери режим</h1>
    <button class="mode-btn" onclick="startGame('Вечеринка')">Вечеринка</button>
    <button class="mode-btn" onclick="startGame('Новый год')">Новый год</button>
    <button class="mode-btn" onclick="startGame('День рождения')">День рождения</button>
</div>

<div class="screen" id="gameScreen">
    <div class="top-controls">
        <div class="icon-btn" onclick="backToModes()" data-tooltip="Назад">
            <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
        </div>
        <div class="icon-btn" onclick="resetGame()" data-tooltip="Сбросить">
            <svg viewBox="0 0 24 24">
                <path d="M3 12a9 9 0 1 0 3-6.7"/>
                <path d="M3 3v6h6"/>
            </svg>
        </div>
    </div>

    <h2 id="modeTitle"></h2>

    <div class="counter">
        Осталось песен: <span id="remaining">0</span>
    </div>

    <div id="result">—</div>

    <div class="word-wrap">
        <div id="word"></div>
        <div class="copy-btn" id="copyBtn" onclick="copyWord()" data-tooltip="Копировать"></div>
    </div>

    <div class="history" id="history"></div>

    <button class="main" onclick="generate()">DROP THE BEAT</button>
</div>

<script>
const words = [
"The Beatles - Yesterday",
"Пол Маккартни - No More Lonely Nights",
"Элвис Пресли - Love Me Tender",
"The Mamas and The Papas - California Dreamin'",
"Procol Harum - A Whiter Shade Of Pale",
"The Kinks - You Really Got Me",
"The Zombies - She's Not There",
"King Crimson - 21st Century Schizoid Man",
"Cream - Sunshine Of Your Love",
"The Beach Boys - Good Vibrations",
"The Moody Blues - Nights in White Satin",
"Manfred Mann - Mighty Quinn",
"The Troggs - Wild Thing",
"The Searchers - Sweets For My Sweet",
"Carpenters - Goodbye To Love",
"Bread - Guitar Man",
"Bread - Lost Without Your Love",
"Принс - Purple Rain",
"Herman's Hermits - No Milk Today",
"Electric Light Orchestra - Don't Bring Me Down",
"Electric Light Orchestra - Ticket To the Moon",
"Chicago - 25 or 6 to 4",
"Jethro Tull - Aqualung",
"America - Ventura Highway",
"The Monkees - Valleri",
"Foreigner - Cold As Ice",
"Fleetwood Mac - Don't Stop",
"The Move - Blackberry Way",
"The Tremeloes - Silence Is Golden",
"Santana - Black Magic Woman",
"The Hollies - The Air That I Breathe",
"Carpenters - (They Long to Be) Close to You",
"Chicago - If You Leave Me Now",
"Manfred Mann's Earth Band - Spirit In The Night",
"Bee Gees - Stayin' Alive",
"The Hollies - Sorry Suzanne",
"The Hollies - Bus Stop",
"Carpenters - For All We Know",
"Bee Gees - Lonely Days",
"Bee Gees - How Deep Is Your Love",
"Manfred Mann's Earth Band - Blinded By The Light",
"Herman's Hermits - There's A Kind Of Hush",
"The Hollies - Stop Stop Stop",
"America - I Need You",
"The Hollies - Long Cool Woman (In a Black Dress)",
"Bee Gees - Jive Talkin'",
"Bee Gees - You Should Be Dancing",
"The Monkees - (I'm Not Your) Steppin' Stone",
"Bee Gees - Night Fever",
"The Move - Flowers In the Rain",
"Bee Gees - To Love Somebody",
"The Monkees - I'm A Believer",
"The Mamas and The Papas - Monday, Monday",
"The Beach Boys - I Can Hear Music",
"The Beach Boys - I Get Around",
"The Tremeloes - Suddenly You Love Me",
"Фредди Меркьюри - The Great Pretender",
"Bee Gees - Massachusetts",
"Джон Леннон - Imagine",
"The Beatles - Let It Be",
"The Beatles - Come Together",
"The Beatles - Hey Jude",
"Uriah Heep - July Morning",
"The Beatles - Something",
"Queen - Bohemian Rhapsody",
"Стиви Уандер - I Just Called to Say I Love You",
"Джордж Харрисон - I've Got My Mind Set On You",
"Пол Маккартни - Mrs. Vanderbilt",
"The Beatles - She Loves You",
"The Beatles - Here Comes The Sun",
"The Beatles - While My Guitar Gently Weeps",
"The Beatles - Michelle",
"The Beatles - Sgt. Pepper's Lonely Hearts Club Band",
"Джон Леннон - Happy Xmas (War Is Over)",
"The Beatles - Girl",
"The Beatles - Yellow Submarine",
"Led Zeppelin - Stairway to Heaven",
"The Beatles - Penny Lane",
"The Beatles - Help!",
"The Beatles - Real Love",
"The Beatles - Free As a Bird",
"Джордж Харрисон - My Sweet Lord",
"The Beatles - Back In The USSR",
"The Beatles - Strawberry Fields Forever",
"Slade - My Oh My",
"Ринго Старр - It Don't Come Easy",
"Slade - Everyday",
"Ринго Старр - Photograph",
"The Beatles - A Hard Day's Night",
"Eagles - Hotel California",
"The Beatles - All You Need Is Love",
"Рой Орбисон - Oh, Pretty Woman",
"The Beatles - Lucy In The Sky With Diamonds",
"Джон Леннон - Oh My Love",
"Джон Леннон - Jealous Guy",
"The Beatles - The Fool On the Hill",
"The Beatles - A Day in The Life",
"The Beatles - In My Life",
"Джон Леннон - Woman",
"The Beatles - And I Love Her"
];

const TOTAL = words.length;

const startScreen = document.getElementById('startScreen');
const gameScreen = document.getElementById('gameScreen');
const modeTitle = document.getElementById('modeTitle');
const resultEl = document.getElementById('result');
const wordEl = document.getElementById('word');
const historyEl = document.getElementById('history');
const copyBtn = document.getElementById('copyBtn');
const remainingEl = document.getElementById('remaining');

const copyIcon = `
<svg viewBox="0 0 24 24">
<rect x="9" y="9" width="13" height="13" rx="2"/>
<rect x="3" y="3" width="13" height="13" rx="2"/>
</svg>`;

const checkIcon = `
<svg viewBox="0 0 24 24">
<path d="M5 13l4 4L19 7"/>
</svg>`;

window.addEventListener('load', () => {
    startScreen.style.display = 'block';
    gameScreen.style.display = 'none';
    sessionStorage.removeItem('used');
    resetVisual();
});

function resetVisual() {
    resultEl.textContent = '—';
    wordEl.textContent = '';
    historyEl.innerHTML = '';
    remainingEl.textContent = TOTAL;
    copyBtn.style.display = 'none';
}

function startGame(mode) {
    resetVisual();
    startScreen.style.display = 'none';
    gameScreen.style.display = 'block';
    modeTitle.textContent = mode;
}

function backToModes() {
    resetGame();
    gameScreen.style.display = 'none';
    startScreen.style.display = 'block';
}

function generate() {
    let used = JSON.parse(sessionStorage.getItem('used')) || [];
    if (used.length >= TOTAL) return;

    let num;
    do {
        num = Math.floor(Math.random() * TOTAL) + 1;
    } while (used.includes(num));

    used.push(num);
    sessionStorage.setItem('used', JSON.stringify(used));

    resultEl.textContent = num;
    wordEl.textContent = words[num - 1];
    copyBtn.innerHTML = copyIcon;
    copyBtn.style.display = 'inline';

    renderHistory(used);
    updateRemaining();
}

function renderHistory(arr) {
    historyEl.innerHTML = '';
    arr.forEach(n => {
        const s = document.createElement('span');
        s.textContent = n;
        historyEl.appendChild(s);
    });
    historyEl.scrollTop = historyEl.scrollHeight;
}

function updateRemaining() {
    let used = JSON.parse(sessionStorage.getItem('used')) || [];
    remainingEl.textContent = TOTAL - used.length;
}

function resetGame() {
    sessionStorage.removeItem('used');
    resetVisual();
}

function copyWord() {
    if (!wordEl.textContent) return;
    navigator.clipboard.writeText(wordEl.textContent);
    copyBtn.innerHTML = checkIcon;
    setTimeout(() => copyBtn.innerHTML = copyIcon, 1000);
}
</script>

</body>
</html>
